<div class="promo-bar">
  <div class="promo-content">
    <span>Summer Sale For All Swim Suits And Free Express Delivery - OFF 50%! <a href="#" class="shop-now">ShopNow</a></span>
<div class="language-selector" (click)="toggleLanguageDropdown()">
  {{ selectedLanguage }} <img src="assets/icons/dropdown.svg" alt="Dropdown">
  
  <!-- The Dropdown Menu -->
  <!-- It is shown or hidden based on the 'isLanguageDropdownOpen' property -->
  @if (isLanguageDropdownOpen) {
    <ul class="language-dropdown">
      <!-- THIS IS THE FIX: Added '$event.stopPropagation()' to each click event -->
      <li (click)="selectLanguage('English'); $event.stopPropagation()">English</li>
      <li (click)="selectLanguage('Spanish'); $event.stopPropagation()">Spanish</li>
      <li (click)="selectLanguage('French'); $event.stopPropagation()">French</li>
      <li (click)="selectLanguage('German'); $event.stopPropagation()">German</li>
    </ul>
  }
</div>
  </div>
</div>

<header class="app-header">
  <div class="container">
    <div class="logo">
      <a routerLink="/">Exclusive</a>
    </div>

    <!-- Main Navigation for Desktop & Mobile -->
    <nav class="main-nav" [class.mobile-menu-open]="isMenuOpen">
      <ul>
        <li><a routerLink="/" (click)="closeMenu()">Home</a></li>
        <li><a routerLink="/contact" (click)="closeMenu()">Contact</a></li>
        <li><a routerLink="/about" (click)="closeMenu()">About</a></li>
        <li><a routerLink="/signup" (click)="closeMenu()">Sign Up</a></li>

        <!-- Links for the mobile menu -->
        <li class="mobile-action-item">
          <a routerLink="/wishlist" class="action-icon-link" (click)="closeMenu()">
            <img src="assets/icons/heart.svg" alt="Wishlist">
            <span>Wishlist</span>
            <span class="wishlist-badge" *ngIf="wishlistCount > 0">{{ wishlistCountDisplay }}</span>
          </a>
        </li>
        <li class="mobile-action-item">
          <a routerLink="/cart" class="action-icon-link" (click)="closeMenu()">
            <img src="assets/icons/cart.svg" alt="Cart">
            <span>Cart</span>
            <span class="cart-badge" *ngIf="cartItemCount > 0">{{ cartCountDisplay }}</span>
          </a>
        </li>
        <li class="mobile-action-item">
          <a routerLink="/account" class="action-icon-link user-icon" (click)="closeMenu()">
            <img src="assets/icons/user.svg" alt="User">
            <span>Account</span>
          </a>
        </li>
      </ul>
    </nav>

    <div class="header-actions">
      <div class="search-box">
        <input type="text" placeholder="What are you looking for?">
        <img src="assets/icons/search.svg" alt="Search">
      </div>
      
      <div class="action-icons">
        <a routerLink="/wishlist" class="action-icon-link">
          <img src="assets/icons/heart.svg" alt="Wishlist">
          <span class="wishlist-badge" *ngIf="wishlistCount > 0">{{ wishlistCountDisplay }}</span>
        </a>
        <a routerLink="/cart" class="action-icon-link">
          <img src="assets/icons/cart.svg" alt="Cart">
          <span class="cart-badge" *ngIf="cartItemCount > 0">{{ cartCountDisplay }}</span>
        </a>
        <a routerLink="/account" class="action-icon-link user-icon">
          <img src="assets/icons/user.svg" alt="User">
        </a>
      </div>

      <button class="hamburger-menu" (click)="toggleMenu()">
        <img src="assets/icons/menu.svg" alt="Menu">
      </button>
    </div>
  </div>

  <!-- NEW: Overlay div to catch outside clicks -->
  <div class="menu-overlay" *ngIf="isMenuOpen" (click)="closeMenu()"></div>
</header>
